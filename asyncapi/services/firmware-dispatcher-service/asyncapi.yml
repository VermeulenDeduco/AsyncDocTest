asyncapi: 3.0.0
info:
  title: Firmware Dispatcher Service
  version: 1.0.0
  description: Dispatches firmware to vehicles and reports final status.

servers:
  productionMQTT:
    host: mqtt.example.com
    protocol: mqtt

channels:
  firmwareUpdateStatusTopic:
    address: 'firmware/update/status/{correlationId}'
    parameters:
      correlationId:
        description: The unique ID for this update workflow, provided dynamically.
        location: path
        examples:
          - 123e4567-e89b-12d3-a456-426614174000
    messages:
      updateStatus:
        $ref: '../../components/messages/FirmwareUpdateStatusMessage.yml'

operations:
  sendFinalUpdateStatus:
    action: send
    channel:
      $ref: '#/channels/firmwareUpdateStatusTopic'
